# Методы
В предыдущих роликах мы поговорили о полях и конструкторах.

- Поля содержат информацию о состоянии объекта (например, состояние здоровья рыцаря и его текущее имя).
- Конструкторы вызываются каждый раз, когда создается объект данного класса, и позволяют нам произвести все необходимые действия, чтобы привести объект в рабочее состояние (например, сохранить переданное нами извне имя рыцаря в соответствующее поле этого объекта).

Это все прекрасно, но скучно. Прямо сейчас после создания любого объекта мы не можем влиять на его состояние.

Т.е. если мы создали рыцаря, у него есть 100 хп. Мы создали второго рыцаря, у которого тоже 100 хп. Но если эти два рыцаря сойдутся в сражении, то каждый из них должен нанести другому какой-то урон – уменьшить хп противника. Это и есть изменение состояния объекта. Но прямо сейчас наши рыцари не умеют производить никаких действий для изменения состояния друг друга. Если мы отдадим первому рыцарю команду бить Eugene, то он не сможет этого сделать. Что бы мы ни делали, они не смогут нам подчиняться, потому что мы не описали в классе Knight, что именно должно произойти при определенной команде.

Если мы захотим, чтобы они сражались, то каждый из объектов-рыцарей сначала должен понимать, как именно сражаться. И наша задача - описать, как им выполнять любые действия, что нам нужны.

А описываем мы, как ведут себя все рыцари, в классе, который мы создали для них - класс Knight. Это чертеж всех рыцарей.

Для изменения состояния объектов используются методы. Метод – это действие, описанное в классе, которое может выполнить каждый объект этого класса. То есть, если мы хотим, чтобы любой рыцарь УМЕЛ бить, то мы должны сделать в его классе соответствующий метод, в котором мы опишем логику нанесения урона противнику, т.е. опишем как именно он бьет противника. Для этого мы зайдем в класс Knight и напишем немного специального кода.

Давайте продемонстрируем эту ситуацию. Перейдем в класс Knight. После конструктора напишем public void hit(Knight enemy) {}. Это и есть наш первый метод. Давайте разберемся, что здесь написано.

![alt text](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/4477dcab-7e40-486e-82aa-90dcfa54de92/15.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20221120%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20221120T103912Z&X-Amz-Expires=86400&X-Amz-Signature=d67c93a73ed607ad6c0fdf77e2f4ef5dd7c2ad6d47e9526ba7bc77ca75e934ee&X-Amz-SignedHeaders=host&response-content-disposition=filename%3D%2215.png%22&x-id=GetObject)

Ключевое слово void пока пропустим. Его необходимо писать, чтобы создать этот метод, но значение слова мы обсудим позднее. Пока просто пишем его, чтобы все работало.

Далее слово hit (бить). Это просто название метода. Вы можете называть свои методы, как вам нравится, но желательно выбирать говорящие имена, чтобы они однозначно описывали, что именно происходит в этом методе, и зачем он нужен. Кроме того, обычно название метода - это глагол, чтобы отражать, что это на самом деле именно действие, а не состояние.

Далее идут круглые скобки, а в них Knight enemy. Эта запись очень похожа на ту, что мы использовали для конструктора, с той лишь разницей, что в конструкторе было String n, а здесь Knight enemy. Точно так же, как и в конструкторе, в круглых скобках метода перечисляются его параметры. Т.о. я смогу извне передать внутрь метода какое-то значение, которое можно будет использовать в фигурных скобках метода. В данном случае я передаю объект другого рыцаря (тип Knight) – противника, которого будет бить рыцарь, у которого я вызову этот метод. Называться параметр тоже может почти как угодно. В данном случае enemy – противник.

Что значит «вызвать метод»? Давайте перейдем в класс App, где выполняется наша программа. Здесь у нас уже есть как раз два рыцаря. В классе Knight мы создали метод hit – то есть бить. Это значит, что каждый из этих объектов-рыцарей умеет бить. Проверим.

Удалим строчки вывода на экран. После создания обоих рыцарей напишем knight1.hit(knight2); Разберем написанное.

![alt text](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/93b83865-b045-470f-a2c4-b0df784df4a5/16.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20221120%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20221120T103937Z&X-Amz-Expires=86400&X-Amz-Signature=fe6959381bec0cf63de07ddac5d881c1f9ddf44331514b0ed9417b8e9113d79c&X-Amz-SignedHeaders=host&response-content-disposition=filename%3D%2216.png%22&x-id=GetObject)

Сначала я пишу knight1. Это наш первый объект-рыцарь. Потом я ставлю точку, как мы писали и для полей, а потом пишу имя метода, который хочу вызвать – hit. После слова hit я открываю круглые скобки, и в них передаю второй объект-рыцаря. В классе Knight в методе hit мы видим в круглых скобках, что ожидается параметр – какой-то противник, которого мы хотим побить. Т.е. дословно здесь написано «рыцарь1.бить.рыцарь2». Другими словами, первый бьет второго. Если я в качестве параметра попробую передать не рыцаря, а что-то другое, например, строку или число, то произойдет ошибка компиляции, т.к. в этом методе ожидается именно рыцарь, о чем нам сообщает тип параметра – Knight.

Если я создам третий объект, то первый так же может бить третьего. Это совершенно неважно. В самом методе я ожидаю в качестве параметра какого-то абстрактного рыцаря. То есть любой объект класса Knight может быть передан в круглые скобки метода hit, и это будет значить, что именно этого рыцаря и нужно бить. Когда компьютер будет выполнять нашу программу, то вместо enemy он подставит реальное значение – в данном случае knight2, который мы сюда передаем. Т.е. enemy это просто шаблон для любого рыцаря, которого мы захотим ударить.

Давайте запустим нашу программу. Прямо сейчас ничего не произошло. Это потому, что мы не описали, как именно должно происходить нанесение урона одним рыцарем другому.

Именно для этого в методе есть фигурные скобки: внутри них мы описываем логику, которая должна выполняться, когда этот метод вызывается. Другими словами, когда мы пишем код в методе main(), то, когда мы запустим программу, компьютер сначала создаст двух рыцарей, а затем отдаст команду первому рыцарю бить второго. В этот момент компьютер заменит параметр метода hit() - Knight enemy - на реальный объект knight2 из метода main и выполнит весь код, который написан внутри фигурных скобок метода hit. Прямо сейчас здесь совсем ничего не написано. Это значит, что наш рыцарь Max атакует Eugene, но это никак на того не влияет, потому что внутри метода нанесения ударов мы не написали, что именно должно происходить, когда противник получает урон. Давайте это исправим.

Пока логика нанесения урона будет довольно простой: скажем, что каждый рыцарь по умолчанию уменьшает хп противника на 10 при вызове метода hit. Как это написать?

Хп мы уменьшаем для противника, а противник у нас – enemy. Какой-то абстрактный рыцарь, которого мы бьем. Напишем 

`enemy.hp = enemy.hp – 10;`

![alt text](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/30e177da-94b1-4172-97ba-9996b2240ab2/17.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20221120%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20221120T104038Z&X-Amz-Expires=86400&X-Amz-Signature=e1350601741a83bb10a0c25ebca738a89f5563deea0b9208b20bddd7f759382b&X-Amz-SignedHeaders=host&response-content-disposition=filename%3D%2217.png%22&x-id=GetObject)

Что здесь написано? Вся эта конструкция называется выражением. У выражения есть левая и правая части относительно знака равно. Когда компьютер выполняет эту строчку, то он сначала выполнит правую часть выражения, а результат ее выполнения запишет в левую часть.

Хп это поле. К полям объекта мы обращаемся через точку, как мы делали до этого для поля name. То есть enemy.hp значит: «получить значение хп у противника». Помните: любого противника. Сейчас knight2, но потом мы можем сделать knight3, передать его в hit, и тогда enemy заменится при выполнении программы на knight3. Но у всех enemy есть хп, потому что они все рыцари, а в классе рыцарей мы создали поле hp.

Далее пишем минус 10. Если прочитать всю правую часть выражения, то получится: «взять текущие хп противника и отнять от них 10». Затем результат этой разности будет записан в поле хп противника.

Т.е. предположим, что мы бьем противника, у которого 100 хп. Он попадает в наш метод в качестве enemy. Мы берем текущее значение его хп – 100, отнимаем от этого 10 – получается 90. 90 – это результат выражения, берем этот результат и записываем в поле хп, которое было равно 100. Теперь вместо 100 оно становится равным 90.

На этой строчке мы уменьшили хп противнику. Давайте еще выведем на экран информацию, что это действительно случилось. Напишем старый добрый sout, а внутри следующее 

`(this.name + “ нанес 10 урона “ + enemy.name + “. Теперь у “ + enemy.name + “ “ + enemy.hp + “ хп.”)`

![alt text](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/41e2aabc-ca46-418d-be13-3ab15d6be067/18.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20221120%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20221120T104116Z&X-Amz-Expires=86400&X-Amz-Signature=85af4234685f7fce1edc12c69fac9c0e8779932fe262babdd98b29fb8087a94d&X-Amz-SignedHeaders=host&response-content-disposition=filename%3D%2218.png%22&x-id=GetObject)

Как видите, строки можно объединять в одну с помощью знака +. То есть, например, если у меня есть две строки «привет» и «мир», то прибавив одну к другой у меня получится новая строка «приветмир».

В сущности, именно это происходит внутри круглых скобок принтлн. Мы сначала получаем имя рыцаря, который бьет. Если мы взглянем на наш метод main, то это имя рыцаря, у которого вызывается метод hit. В данном случае это knight1, а его имя Max.

Далее мы прибавляем строку с информацией об уроне, а потом имя противника. После добавляем информацию о новом значении хп противника. Сначала выводим его имя, а потом новое значение хп через пробел. Вот и все.

Запустим нашу программу и проверим. Как видите на экран выводится, что Max бьет Eugene, и у Eugene осталось 90 хп. Код выполняется строка за строкой сверху вниз внутри метода. Именно это мы и ожидали.

Теперь наши рыцари могут драться друг с другом. Всего лишь нужно отдать команду hit кому-то из них и указать, на кого нужно напасть. В этом случае тот рыцарь, которому отдали команду, атакует того, который указывается в круглых скобках метода, т.е. становится enemy - противником первого. После нанесения ударов, противник потеряет 10 очков здоровья, как мы и хотели.

Точно так же мы можем после удара первого рыцаря по второму, нанести удар вторым по первому. Для этого мы просто поменяем их местами. Теперь knight2 бьет knight1.

![alt text](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/07c8c049-536d-4e13-8778-6824fe861b74/19.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20221120%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20221120T104143Z&X-Amz-Expires=86400&X-Amz-Signature=705e3cc8af310baf77837b2ef8a0c782bd42098597d89383a5e22b58868775f5&X-Amz-SignedHeaders=host&response-content-disposition=filename%3D%2219.png%22&x-id=GetObject)

Запустим нашу программу, чтобы убедиться, что это действительно так: видим, что сначала knight1 побил knight2, а потом knight2 побил knight1. После этого у них обоих стало по 90 хп.